(this["webpackJsonptemple-quest"]=this["webpackJsonptemple-quest"]||[]).push([[0],{292:function(e,t,n){e.exports=n.p+"static/media/stone.1e884880.wav"},293:function(e,t,n){e.exports=n.p+"static/media/stone-pick.d9b26606.wav"},294:function(e,t,n){e.exports=n.p+"static/media/CongaSound-4.0be119fc.wav"},295:function(e,t,n){e.exports=n.p+"static/media/JungleMenu.15246aca.wav"},296:function(e,t,n){e.exports=n.p+"static/media/TeamLogo.11261b0d.wav"},297:function(e,t,n){e.exports=n.p+"static/media/game-success.4f990a22.wav"},298:function(e,t,n){e.exports=n.p+"static/media/fail-sound-effect.e734977d.wav"},323:function(e,t,n){e.exports=n.p+"static/media/TeamLogo.a7a0ba22.svg"},324:function(e,t,n){e.exports=n.p+"static/media/gameLogo.e07aa85e.svg"},325:function(e,t,n){e.exports=n.p+"static/media/bgvideo.45731a0f.mp4"},338:function(e,t,n){e.exports=n(578)},367:function(e,t){},373:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=373},468:function(e,t){},575:function(e,t,n){},578:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n.n(a),o=n(67),l=n(32),i=n(75),s=n(288),c=n(36);const d={loading:!0};var u=n(77);const p=[[-7.5,.15,-7.5],[-7.5,.15,-2.5],[-7.5,.15,2.5],[-7.5,.15,7.5],[-2.5,.15,-7.5],[-2.5,.15,-2.5],[-2.5,.15,2.5],[-2.5,.15,7.5],[2.5,.15,-7.5],[2.5,.15,-2.5],[2.5,.15,2.5],[2.5,.15,7.5],[7.5,.15,-7.5],[7.5,.15,-2.5],[7.5,.15,2.5],[7.5,.15,7.5]];function m(e,t){const n=e.find(({id:e})=>e===parseInt(t));if(!n)return;const a=h(e,n);return Object.values(a).some(e=>Object.values(e).some(e=>e>=3))}function h(e,t){var n=[];if(!t.location)return 0;return e.forEach(e=>{if(!e.location||e.id===t.id)return!1;const a=e.location.row===t.location.row,r=e.location.column===t.location.column,o=function(e,t){const n=t.location.column-e.location.column,a=t.location.row-e.location.row,r=Math.abs(n)!==Math.abs(a);return 0===a||r?0:n/a}(t,e);a&&n.push(Object(c.a)({},e,{match:"row"})),r&&n.push(Object(c.a)({},e,{match:"column"})),1===o&&n.push(Object(c.a)({},e,{match:"diagonal_up"})),-1===o&&n.push(Object(c.a)({},e,{match:"diagonal_down"}))}),n.reduce((e,n)=>(Object.keys(n.details).forEach(a=>{const r=n.details[a]===t.details[a];e[n.match][a]=(e[n.match][a]||0)+r}),e),{row:{},column:{},diagonal_up:{},diagonal_down:{}})}var g=n(192),E=n.n(g),v=n(114),b=n(289),y=n(290),f=n.n(y),I=n(291),w=n.n(I);function O(){return(O=Object(b.a)(E.a.mark((function e(t,n,a){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((e,r)=>{var o,l={pieces:[],selectedPieceId:n,lastPieceID:"",isUserTurn:!1,isUserPerspective:!0,difficulty:a},i=Object(v.a)(t);try{for(i.s();!(o=i.n()).done;){const e=o.value;l.pieces.push(Object(c.a)({},e))}}catch(m){i.e(m)}finally{i.f()}let s={generateMoves:C,makeMove:P,unmakeMove:S,evaluate:M,evaluateTerminal:j},d=new w.a(s);const u=k(l.pieces);let p=d.search(l,u);e({location:p.bestMove.location,pieceId:p.bestMove.pieceId})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e,t){const n=e.filter(e=>!e.location).length;if(0===t)return n>14?1:2;if(n>14)return 1;if(n>11)return 2;if(n>7)return 4;if(n>1)return 6;return e.length-n-2}function C(e){const t=e.pieces,n=e.selectedPieceId;let a=[];e.isUserPerspective=!e.isUserPerspective,e.isUserTurn=e.isUserPerspective;for(let i=0;i<4;i++)for(let e=0;e<4;e++){if(!t.some(t=>f()(t.location,{row:i,column:e}))){const s=t.filter(e=>!e.location&&e.id!==parseInt(n));var r,o=Object(v.a)(s);try{for(o.s();!(r=o.n()).done;){let t=r.value;const o={selectedPieceId:n,pieceId:t.id,location:{row:i,column:e}};a.push(o)}}catch(l){o.e(l)}finally{o.f()}}}return a}function P(e,t){const n=t.pieceId,a=t.location,r=t.selectedPieceId;return e.isUserTurn=!e.isUserTurn,e.pieces.find(e=>e.id===parseInt(r)&&(e.location=a,!0))&&(e.lastPieceID=r,e.selectedPieceId=n),!0}function S(e,t){const n=t.selectedPieceId;e.isUserTurn=!e.isUserTurn,e.pieces.find(t=>t.id===parseInt(e.lastPieceID)&&(t.location=null,!0))&&(e.lastPieceID="",e.selectedPieceId=n)}function M(e){let t=0;const n=e.isUserTurn,a=e.pieces,r=e.isUserPerspective,o=e.difficulty;return t=function(e){let t=0;var n,a=Object(v.a)(e);try{for(a.s();!(n=a.n()).done;){const a=n.value;if(a.location){const n=h(e,a);t+=Object.values(n).reduce((e,t)=>{let n=0;return Object.values(t).forEach(e=>{n+=e}),e+n},0)}}}catch(r){a.e(r)}finally{a.f()}return t}(a),t*=0===o&&n&&r?1:-1,t}function j(e){let t=null;const n=e.isUserTurn,a=e.pieces,r=e.lastPieceID,o=e.isUserPerspective,l=m(a,r),i=a.every(e=>!!e.location);return l?t=1/0*(n&&o?1:-1):i&&(t=0),t}const T={isUserTurn:!0,pieces:function(){let e=[];for(let t=0;t<16;t++){const n=t.toString(2),a="0".repeat(4-n.length)+n,r={id:t,details:{light:parseInt(a[0]),tall:parseInt(a[1]),round:parseInt(a[2]),pitted:parseInt(a[3])},owned:!1,location:null};e.push(r)}return e}(),selectedPieceId:"",isOnlineMode:!1,isSingleMode:!0,mounted:!1,cellCords:p,pieceObjects:[{id:0,obj:"shortDarkFlatSquare",loc:[-12.5,.15,13]},{id:1,obj:"shortDarkHoleSquare",loc:[-9,.15,13]},{id:2,obj:"shortDarkFlatCylinder",loc:[-5.5,.15,13]},{id:3,obj:"shortDarkHoleCylinder",loc:[-2,.15,13]},{id:4,obj:"tallDarkFlatSquare",loc:[2,.15,13]},{id:5,obj:"tallDarkHoleSquare",loc:[5.5,.15,13]},{id:6,obj:"tallDarkFlatCylinder",loc:[9,.15,13]},{id:7,obj:"tallDarkHoleCylinder",loc:[12.5,.15,13]},{id:8,obj:"shortLightFlatSquare",loc:[-12.5,.15,17]},{id:9,obj:"shortLightHoleSquare",loc:[-9,.15,17]},{id:10,obj:"shortLightFlatCylinder",loc:[-5.5,.15,17]},{id:11,obj:"shortLightHoleCylinder",loc:[-2,.15,17]},{id:12,obj:"tallLightFlatSquare",loc:[2,.15,17]},{id:13,obj:"tallLightHoleSquare",loc:[5.5,.15,17]},{id:14,obj:"tallLightFlatCylinder",loc:[9,.15,17]},{id:15,obj:"tallLightHoleCylinder",loc:[12.5,.15,17]}],isGameOver:!1,difficultyLevel:0,isTie:!1,score:0,playerOne:"",playerTwo:"",roundCount:0,roomId:1};var _=n(147),U=n.n(_);const D={peer:null,messages:[],peerId:"",remotePeerId:"",onlineUsers:[],isInvited:!1,inviteSent:!1,inviteStatus:"pending",messageInput:""};var x=n(292),A=n.n(x),N=n(293),L=n.n(N);const z={musicOn:!0,musicVolume:100,soundVolume:100,musicUrl:null,playingSound:!1,soundOn:!0,soundUrl:null};var B=Object(i.combineReducers)({intro:(e=d,{type:t,payload:n})=>{switch(t){case"intro_update_data":return Object(c.a)({},e,{[n.prop]:n.value});default:return e}},board:(e=T,{type:t,payload:n})=>{switch(t){case"board_update_data":return Object(c.a)({},e,{[n.prop]:n.value});case"board_update_piece_object":{let t=[...e.pieceObjects],a=t.findIndex(e=>e.id===parseInt(n.id));return a<0?e:(t[a]=Object(c.a)({},t[a],{[n.prop]:n.value}),Object(c.a)({},e,{pieceObjects:t}))}case"board_pick_piece":return Object(c.a)({},e,{selectedPieceId:n.selectedPieceId,isUserTurn:!e.isUserTurn});case"board_place_piece":{let t=[...e.pieces],a=t.findIndex(e=>e.id===parseInt(n.pieceId));return a<0?e:(t[a]=Object(c.a)({},t[a],{owned:e.isUserTurn,location:n.location}),Object(c.a)({},e,{pieces:t,selectedPieceId:""}))}case"board_reset_game":if(n&&n.playAgain){const t=e.isUserTurn?e.pieces.filter(e=>!e.location).length:0,n=e.roundCount+1;return Object(c.a)({},T,{isOnlineMode:e.isOnlineMode,isSingleMode:e.isSingleMode,score:e.score+=t,playerOne:e.playerOne,playerTwo:e.playerTwo,roundCount:n,roomId:n%2+1})}return Object(c.a)({},T);default:return e}},network:(e=D,{type:t,payload:n})=>{switch(t){case"chat_update_data":return Object(c.a)({},e,{[n.prop]:n.value});case"network_receive_messsage":const t=[{createdBy:n.peerId,createdOn:U()().utc(),content:n.data},...e.messages];return Object(c.a)({},e,{messages:t});case"NETWORK_RESET_DATA":return Object(c.a)({},D,{peer:e.peer,peerId:e.peerId});default:return e}},audio:(e=z,{type:t,payload:n})=>{switch(t){case"AUDIO_UPDATE_DATA":return Object(c.a)({},e,{[n.prop]:n.value});case"audio_play_sound":return Object(c.a)({},e,{soundUrl:n,playingSound:!0});case"board_pick_piece":return Object(c.a)({},e,{soundUrl:L.a,playingSound:!0});case"board_place_piece":return Object(c.a)({},e,{soundUrl:A.a,playingSound:!0});case"AUDIO_MUTE_MUSIC":let t=!e.musicOn;return Object(c.a)({},e,{musicOn:t});case"AUDIO_MUTE_SOUND":let a=!e.soundOn;return Object(c.a)({},e,{soundOn:a});default:return e}}}),F=n(596),V=n(64),G=Object(V.a)(),H=n(586),q=n(303),Z=n(585),R=n(69),W=n(294),Y=n.n(W),K=n(295),J=n.n(K),Q=n(296),$=n.n(Q),X=n(297),ee=n.n(X),te=n(298),ne=n.n(te);const ae=()=>(e,t)=>{t().audio.soundOn&&e(re("musicUrl",null))},re=(e,t)=>n=>{n(oe({prop:e,value:t}))},oe=({prop:e,value:t})=>({type:"AUDIO_UPDATE_DATA",payload:{prop:e,value:t}}),le=(e,t)=>n=>{n(ie({prop:e,value:t}))},ie=({prop:e,value:t})=>({type:"intro_update_data",payload:{prop:e,value:t}});var se=n(299),ce=n.n(se);const de=(e,t)=>e=>{e({type:"NETWORK_RESET_DATA"})},ue=(e,t)=>n=>{n(Ee({prop:e,value:t}))},pe=(e,t)=>(n,a)=>{const r=a().network,o=r.remotePeerId,l=r.peer;console.log("sending to ".concat(o),t);const i=l.connect(o);i.on("open",()=>{i.send({type:e,data:t})})},me=()=>(e,t)=>{const n=t().network,a=n.peer,r=n.remotePeerId;a.on("open",(function(t){e(ge())})),a.on("error",(function({type:t}){"unavailable-id"===t&&(console.log("Id is taken already"),alert("Username is already taken, please select another"),e(ue("peer",null))),"peer-unavaliable"===t&&(console.log("Peer disconnected"),alert("Your opponent appears to have disconnected!"),a.destroy(),G.push("/menu"))})),a.on("connection",t=>{t.on("open",()=>{r.length||(e(ue("remotePeerId",t.peer)),e(ue("isInvited",!0)))}),t.on("data",({type:n,data:a})=>{if("inviteStatus"===n&&"accepted"===a?(alert("Your invite was accepted!"),e(Oe("isUserTurn",!1)),e(ye(!0))):"inviteStatus"===n&&(e(ue("inviteSent",!1)),e(ue("isInvited",!1))),"message"===n&&e({type:"network_receive_messsage",payload:{peerId:t.peer,data:a}}),"select_piece"===n&&(console.log("receiving selection...",a),e(Ie(a,!0))),"place_piece"===n){console.log("receving placement...",a);const t=a.row,n=a.column;e(we(t,n,!0))}})})},he=e=>(t,n)=>{const a=new ce.a(e,{host:"temple-quest-peerjs.herokuapp.com",port:80,debug:2});t(ue("peer",a))},ge=()=>(e,t)=>{var n=t().network.peer;n&&n.listAllPeers(t=>{const a=t.filter(e=>e!==n.id);e(ue("onlineUsers",a))})},Ee=({prop:e,value:t})=>({type:"chat_update_data",payload:{prop:e,value:t}}),ve=(e=!1)=>(t,n)=>{t({type:"board_reset_game",payload:{playAgain:e}}),e||G.push("/menu")},be=(e,t,n)=>a=>{a({type:"board_update_piece_object",payload:{id:e,prop:t,value:n}})},ye=(e=!1)=>(t,n)=>{t(Oe("isSingleMode",!1)),e&&t(Oe("isOnlineMode",!0)),G.push("board")},fe=e=>(t,n)=>{const a=n().board,r=a.pieces,o=a.isUserTurn,l=n().board,i=l.isOnlineMode,s=l.isSingleMode;let c=m(r,e);const d=r.every(e=>!!e.location);if(c||d){t(Oe("isGameOver",!0)),c||t(Oe("isTie",!0));const e=!i&&!s;t(((e=!0)=>({type:"audio_play_sound",payload:e?ee.a:ne.a}))(o||e))}},Ie=(e,t=!1)=>(n,a)=>{const r=a().board,o=r.isOnlineMode,l=r.isSingleMode,i=r.pieces,s=(r.cellCords,a().board),c=s.selectedPieceId,d=s.difficultyLevel;if(!c&&i.find(({id:t,location:n})=>t===parseInt(e)&&!n))if(n({type:"board_pick_piece",payload:{selectedPieceId:e.toString()}}),n(be(e,"loc",[0,.069,-13])),o&&!t)n(pe("select_piece",e));else if(l&&!t){var u=performance.now();(function(e,t,n){return O.apply(this,arguments)})(i,e,d).then(({location:e,pieceId:t})=>{n(we(e.row,e.column,!1)),a().board.isGameOver||n(Ie(t,!0))}).catch(e=>{alert("The AI failed")});var p=performance.now();console.log("Time elapsed: ",(p-u)/1e3," seconds")}},we=(e,t,n=!1)=>(a,r)=>{const o=r().board.isOnlineMode,l=function(e,t){const n=t+4*e,a=p.find((e,t)=>t===n),r=Object(u.a)(a,3);return{x:r[0],y:r[1],z:r[2]}}(e,t),i=r().board.selectedPieceId;if(i){if(a({type:"board_place_piece",payload:{pieceId:i,location:{row:e,column:t}}}),l){const e=l.x,t=l.y,n=l.z;a(be(i,"loc",[e,t,n]))}a(fe(i)),o&&(a(Oe("isUserTurn",!n)),n||a(pe("place_piece",{row:e,column:t})))}},Oe=(e,t)=>n=>{n(ke({prop:e,value:t}))},ke=({prop:e,value:t})=>({type:"board_update_data",payload:{prop:e,value:t}});class Ce extends a.Component{render(){const e=this.props,t=e.onClick,n=e.title,a=e.back,o=e.playButtonSound,l=e.hide,i=a?"back":n;if(l)return null;return r.a.createElement(Z.a,{className:"mainScreen__option"},r.a.createElement("button",{className:"menuButton",onClick:()=>{o(),a?G.goBack():t&&t()}},a&&r.a.createElement(R.a,{name:"left arrow"}),i))}}var Pe=Object(l.b)(null,{playButtonSound:()=>(e,t)=>{e({type:"audio_play_sound",payload:Y.a})}})(Ce);class Se extends a.Component{render(){return r.a.createElement(H.a,{className:"screen",stretched:!0,padded:!0,centered:!0},r.a.createElement(q.a,{verticalAlign:"middle",mobile:16,tablet:8,computer:10},r.a.createElement(Z.a,{className:"screen__box",textAlign:"center"},r.a.createElement("h1",null,"About"),r.a.createElement("p",null,"During the conquering from Spain, Spanish soldiers captured the ruler of that time, Moctezuma. Due to the dominance of the Aztecs over the region, their culture was known for their riches. And, according to the legend, Moctezuma had one of the biggest treasures ever."),r.a.createElement("p",null,"Spanish soldiers tortured Moctezuma to make him reveal the location of the treasure, but he never did it. Some people believe that at the middle of the chaos, Moctezuma\u2019s guards moved the treasure to a safe place, where they eventually took Moctezuma\u2019s body too."),r.a.createElement("p",null,"You, brave explorer, have now come upon the great temple of Moctezuma. The treasure hidden within could be yours! Now, you stand at the entrance of your great Temple Quest, and you can practically feel the gold coins on your fingertips. There's just one thing standing between you and the treasure... Moctezuma\u2019s most mind bending puzzle:"),r.a.createElement("h2",null,"QUARTO."),r.a.createElement("p",null)),r.a.createElement(Pe,{back:!0})))}}var Me=Se,je=n(304),Te=n(597),_e=n(598),Ue=n(587),De=n(200);class xe extends a.Component{constructor(...e){super(...e),this.handleClick=e=>G.push(e),this.handleExit=()=>{}}render(){return r.a.createElement(H.a,{stretched:!0,className:"choiceScreen",padded:!0,centered:!0,columns:3},r.a.createElement(je.a,null,r.a.createElement(q.a,{verticalAlign:"middle"},r.a.createElement(Z.a,{className:"playerChoice"},r.a.createElement("h1",null,"Connection Lost!"),r.a.createElement(Te.a,null,r.a.createElement(_e.a,{active:!0},r.a.createElement(Ue.a,{content:"Trying to reconnect..."})))),r.a.createElement(Z.a,{className:"mainScreen__option"},r.a.createElement(De.a,{size:"massive",color:"black",onClick:()=>this.handleClick("menu")},"MAIN MENU")))))}}var Ae=xe;class Ne extends a.Component{constructor(...e){super(...e),this.handleExit=()=>{}}handleClick(e){this.props.updateBoardData("difficultyLevel",e),G.push("board")}render(){return r.a.createElement(H.a,{stretched:!0,className:"screen",padded:!0,centered:!0,columns:3},r.a.createElement(q.a,{verticalAlign:"middle"},r.a.createElement(Pe,{title:"easy",onClick:()=>this.handleClick(0)}),r.a.createElement(Pe,{title:"medium",onClick:()=>this.handleClick(1)}),r.a.createElement(Pe,{title:"hard",onClick:()=>this.handleClick(2)}),r.a.createElement(Pe,{back:!0})))}}var Le=Object(l.b)(null,{updateBoardData:Oe})(Ne);class ze extends a.Component{constructor(...e){super(...e),this.handleClick=e=>G.push(e),this.handleExit=()=>{}}render(){return r.a.createElement(H.a,{stretched:!0,className:"screen",padded:!0,centered:!0,columns:3},r.a.createElement(je.a,null,r.a.createElement(q.a,{verticalAlign:"middle"},r.a.createElement(Pe,{title:"singleplayer",onClick:()=>this.handleClick("difficulty")}),r.a.createElement(Pe,{title:"multiplayer",onClick:()=>this.handleClick("local")}),r.a.createElement(Pe,{title:"online",onClick:()=>this.handleClick("online")}),r.a.createElement(Pe,{back:!0}))))}}var Be=ze,Fe=n(18),Ve=n(44),Ge=n(595),He=n(592),qe=n(150),Ze=n(588),Re=n(308),We=n.n(Re),Ye=n(309),Ke=n.n(Ye),Je=n(328);function Qe({seed:e}){let t=new We.a(Ke.a,{base64:!0,width:50}).create(e);return r.a.createElement(Je.a,{alt:"avatar",avatar:!0,src:t})}class $e extends a.Component{constructor(...e){super(...e),this.handleMessageInput=({target:e})=>this.props.updateNetworkData("messageInput",e.value)}handleMessageSend(){this.props.sendMessage(this.props.messageInput)}renderMessages(){return this.props.messages.map((e,t)=>r.a.createElement(He.a.Event,{key:t},r.a.createElement(He.a.Label,null,r.a.createElement(Qe,{seed:e.createdBy})),r.a.createElement(He.a.Content,null,r.a.createElement(He.a.Summary,null,r.a.createElement(He.a.User,null,e.createdBy),r.a.createElement(He.a.Date,null,U()(e.createdOn).local().fromNow())),r.a.createElement(He.a.Extra,{text:!0},e.content))))}render(){return this.props.isOnlineMode?r.a.createElement(qe.a,{trigger:this.props.children},r.a.createElement(qe.a.Header,null,"Chat"),r.a.createElement(qe.a.Content,{scrolling:!0},r.a.createElement(qe.a.Description,null,r.a.createElement(He.a,null,this.renderMessages()))),r.a.createElement(qe.a.Actions,null,r.a.createElement(Ze.a,{action:!0,fluid:!0,size:"large",placeholder:"Message..."},r.a.createElement("input",{onChange:this.handleMessageInput,value:this.props.messageInput}),r.a.createElement(De.a,{icon:!0,labelPosition:"right",onClick:this.handleMessageSend.bind(this)},"Send",r.a.createElement(R.a,{name:"send"}))))):null}}var Xe=Object(l.b)(({network:e,board:t})=>{const n=t.isOnlineMode;return{remotePeerId:e.remotePeerId,messages:e.messages,peer:e.peer,isOnlineMode:n,messageInput:e.messageInput}},{updateNetworkData:ue,sendNetworkData:pe,listenNetworkData:me,sendMessage:e=>(t,n)=>{const a=n().network.peer;t(pe("message",e)),t({type:"network_receive_messsage",payload:{peerId:a._id,data:e}}),t(ue("messageInput",""))}})($e);class et extends a.Component{getTurnLabel(){const e=this.props,t=e.isUserTurn,n=e.selectedPieceId,a=e.isSingleMode,r=this.props,o=r.peerId,l=r.remotePeerId,i=r.isOnlineMode,s=r.playerOne,c=r.playerTwo;let d="you",u="opponent",p=t?"":"s";a||(d=i?o:s,u=i?l:c,p="s");const m=t?d:u,h=n?"place".concat(p):"pick".concat(p);return"".concat(m," ").concat(h)}render(){const e=this.props.selectedPieceId?"hand point down":"grab";return r.a.createElement("div",null,r.a.createElement(R.a,{name:e}),this.getTurnLabel())}}var tt=Object(l.b)(({board:e,network:t})=>{const n=e.isUserTurn,a=e.isOnlineMode,r=e.isSingleMode,o=e.selectedPieceId,l=e.playerOne,i=e.playerTwo;return{isUserTurn:n,isOnlineMode:a,isSingleMode:r,selectedPieceId:o,peerId:t.peerId,playerOne:l,playerTwo:i,remotePeerId:t.remotePeerId}})(et),nt=n(599),at=n(196),rt=n.n(at);var ot=Object(l.b)(({audio:e})=>({musicOn:e.musicOn,soundOn:e.soundOn,musicVolume:e.musicVolume,soundVolume:e.soundVolume}),{updateAudioData:re})((function(e){const t=(t,n)=>e.updateAudioData("".concat(t,"Volume"),n),n=e.musicVolume,a=e.soundVolume;return r.a.createElement(Te.a.Group,{class:"settingsGroup",raised:!0},r.a.createElement(Te.a,null,r.a.createElement(nt.a,{as:"h3",dividing:!0,textAlign:"center"},r.a.createElement(R.a,{name:"music"}),"Audio"),r.a.createElement("div",null,"Music Volume",r.a.createElement(rt.a,{min:0,max:100,value:n,onChange:e=>t("music",e)})),r.a.createElement("div",null,"Sound Volume",r.a.createElement(rt.a,{min:0,max:100,value:a,onChange:e=>t("sound",e)}))))}));class lt extends a.Component{render(){return r.a.createElement(qe.a,{trigger:this.props.children},r.a.createElement(qe.a.Header,null,"Settings"),r.a.createElement(qe.a.Content,null,r.a.createElement(qe.a.Description,null,r.a.createElement(ot,null))))}}var it=lt;class st extends a.Component{constructor(...e){super(...e),this.handleItemClick=(e,{name:t})=>this.setState({activeItem:t})}render(){const e=this.props,t=e.score,n=e.isOnlineMode,a=e.isSingleMode,o=!n&&!a;return r.a.createElement(Ge.a,{style:{margin:0},size:"huge",inverted:!0,className:"gameNavBar"},r.a.createElement(Ge.a.Item,{name:"turn"},r.a.createElement(tt,null)),!o&&r.a.createElement(Ge.a.Item,{name:"turn"},r.a.createElement(R.a,{name:"diamond",color:"teal"}),t),r.a.createElement(Ge.a.Menu,{position:"right"},r.a.createElement(Xe,null,r.a.createElement(Ge.a.Item,{name:"chat",onClick:this.handleItemClick},r.a.createElement(De.a,{icon:!0,inverted:!0},r.a.createElement(R.a,{name:"chat"}),"Chat"))),r.a.createElement(it,null,r.a.createElement(Ge.a.Item,{name:"settings"},r.a.createElement(De.a,{icon:!0,inverted:!0},r.a.createElement(R.a,{name:"setting"}),"Settings"))),r.a.createElement(Ge.a.Item,{name:"end"},r.a.createElement(De.a,{icon:!0,inverted:!0,onClick:()=>this.props.endGame(!1)},r.a.createElement(R.a,{name:"close",color:"red"}),"End game"))))}}var ct=Object(l.b)(({board:e})=>({score:e.score,isOnlineMode:e.isOnlineMode,isSingleMode:e.isSingleMode}),{endGame:ve})(st);class dt extends a.Component{renderLights(){return[{direction:[1,-.35,-1],position:[-20,20,20]},{direction:[1,-.35,1],position:[-20,20,-20]}].map((e,t)=>{const n=Object(u.a)(e.direction,3),a=n[0],o=n[1],l=n[2],i=Object(u.a)(e.position,3),s=i[0],c=i[1],d=i[2];return r.a.createElement(Ve.b,{name:"dl0".concat(t),intensity:1.7,direction:new Fe.g(a,o,l),position:new Fe.g(s,c,d)},r.a.createElement(Ve.h,{mapSize:1024,useBlurExponentialShadowMap:!0,blurKernel:32,shadowCasters:["counterClockwise","clockwise","BoomBox"]}))})}render(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ve.e,{intensity:1.5,position:Fe.g.Up()}),this.renderLights())}}var ut=dt;let pt="".concat("/tq","/objects/");class mt extends a.Component{renderWalls(){const e=this.props.roomId;return[{position:[-40,0,0],rotation:[0,0,0]},{position:[0,0,-40],rotation:[0,Math.PI/2,0]},{position:[40,0,0],rotation:[0,0,0]},{position:[0,0,40],rotation:[0,Math.PI/2,0]}].map((t,n)=>{const a=Object(u.a)(t.position,3),o=a[0],l=a[1],i=a[2],s=Object(u.a)(t.rotation,3),c=s[0],d=s[1],p=s[2];return r.a.createElement(Ve.f,{sceneFilename:"frontWall".concat(e,".glb"),rootUrl:pt,position:new Fe.g(o,l,i),rotation:new Fe.g(c,d,p)})})}render(){return r.a.createElement(r.a.Fragment,null,this.renderWalls())}}var ht=mt;class gt extends a.Component{constructor(...e){super(...e),this.handleClick=e=>this.props.endGame(e)}render(){const e=this.props,t=e.isGameOver,n=e.isUserTurn,a=e.isOnlineMode,o=e.isSingleMode,l=e.isTie,i=this.props,s=i.playerOne,c=i.playerTwo,d=(i.peerId,i.remotePeerId);let u=n?"You've won!!!!!!":"Game Over, you lost";return o||(u=a?n?"You":d:n?s:c,u+=" won the game!"),l&&(u="Game Over. Is a tie!"),r.a.createElement(qe.a,{open:t,basic:!0,size:"small"},r.a.createElement(nt.a,{icon:"flag",content:u}),r.a.createElement(qe.a.Content,null,r.a.createElement("h3",null,"Do you want to play other round?")),r.a.createElement(qe.a.Actions,null,r.a.createElement(De.a,{color:"red",onClick:()=>this.handleClick(!1),inverted:!0},r.a.createElement(R.a,{name:"cancel"})," No"),r.a.createElement(De.a,{color:"green",onClick:()=>this.handleClick(!0),inverted:!0},r.a.createElement(R.a,{name:"checkmark"})," Yes")))}}var Et=Object(l.b)(({board:e,network:t})=>{const n=e.score,a=e.isGameOver,r=e.isUserTurn,o=e.isOnlineMode,l=e.isSingleMode,i=e.isTie,s=e.playerTwo;return{score:n,isGameOver:a,isUserTurn:r,isOnlineMode:o,isSingleMode:l,playerOne:e.playerOne,playerTwo:s,peerId:t.peerId,remotePeerId:t.remotePeerId,isTie:i}},{endGame:ve})(gt);let vt="".concat("/tq","/objects/");class bt extends a.Component{componentWillMount(){this.props.stopMusic(),this.props.initBoard()}handleOnlineChange(){const e=this.props.isOnlineMode;this.props.updateBoardData("isOnlineMode",!e)}hasValidTurn(){const e=this.props,t=e.isUserTurn,n=e.isSingleMode,a=e.isOnlineMode;return!(!t&&(n||a))}handlePieceClick(e){const t=this.props.selectBagPiece;this.hasValidTurn()&&t(e)}handleCellClick(e,t){const n=this.props.selectBoardCell;this.hasValidTurn()&&n(e,t,!1)}isUsedLocation(e,t){return!!this.props.pieces.find(n=>{if(!n.location)return!1;const a=n.location;return a.row===e&&a.column===t})}meshPicked(e){const t=this.props.cellCords,n=e.name,a=e._absolutePosition;if("Cylinder.015"===n){const e=t.findIndex(e=>e[0]===a.x&&e[2]===a.z);if(e<0)return;const n=parseInt(e)%4,r=Math.floor(parseInt(e)/4);this.handleCellClick(r,n)}else if(n.includes("_primitive")){const e=this.props.pieceObjects.find(e=>n.includes(e.obj));e&&this.handlePieceClick(e.id)}}onSceneMount(e){const t=e.scene;t.getEngine().displayLoadingUI(),setTimeout(()=>{t.getEngine().hideLoadingUI()},5e3)}render(){const e=this.props.roomId;return r.a.createElement("div",{className:"gameScreen"},r.a.createElement(Et,null),r.a.createElement(ct,null),r.a.createElement(Ve.c,{canvasId:"playground",adaptToDeviceRatio:!0,antialias:!0},r.a.createElement(Ve.g,{onSceneMount:this.onSceneMount,onMeshPicked:this.meshPicked.bind(this)},r.a.createElement(Ve.a,{name:"camera1",radius:35,setPosition:[new Fe.g(30,25,0)],upperRadiusLimit:39,lowerRadiusLimit:20,panningSensibility:0,lowerAlphaLimit:Math.PI/-18,upperAlphaLimit:Math.PI/18,lowerBetaLimit:Math.PI/3,upperBetaLimit:Math.PI/3*1,target:Fe.g.Zero(),minZ:.001}),r.a.createElement(ut,null),r.a.createElement(Ve.f,{sceneFilename:"treasureChest.glb",rootUrl:vt,scaling:new Fe.g(6,6,6),position:new Fe.g(-25,-1.3,0)}),1===e&&r.a.createElement(ht,{roomId:1}),2===e&&r.a.createElement(ht,{roomId:2}),1===e&&this.renderGround(1),2===e&&this.renderGround(2),this.renderPieces())))}renderGround(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ve.f,{sceneFilename:"gameBoard".concat(e,".glb"),rootUrl:vt}),r.a.createElement(Ve.f,{sceneFilename:"slabForPieces".concat(e,".glb"),rootUrl:vt,position:new Fe.g(0,.069,15)}),r.a.createElement(Ve.f,{sceneFilename:"coaster".concat(e,".glb"),rootUrl:vt,position:new Fe.g(0,.15,-13)}),r.a.createElement(Ve.d,{name:"ground",subdivisions:1},r.a.createElement(Ve.f,{sceneFilename:"floor".concat(e,".glb"),rootUrl:vt,position:Fe.g.Zero()})),this.renderCells(e))}renderPieces(){const e=new Fe.g(.6,.6,.6);return this.props.pieceObjects.map((t,n)=>{const a=t.loc;return r.a.createElement(Ve.f,{name:"hehe",sceneFilename:"".concat(t.obj,".glb"),rootUrl:vt,position:new Fe.g(a[0],a[1],a[2]),scaling:e,key:n})})}renderCells(e){return this.props.cellCords.map((t,n)=>r.a.createElement(Ve.f,{sceneFilename:"pieceThatGoesInHole".concat(e,".glb"),rootUrl:vt,position:new Fe.g(t[0],.015,t[2]),key:n,meshNames:["testing!"]}))}}var yt=Object(l.b)(({board:e,network:t})=>{const n=e.pieces,a=e.isUserTurn,r=e.selectedPieceId,o=e.isOnlineMode,l=e.roomId;return{pieces:n,isUserTurn:a,selectedPieceId:r,isOnlineMode:o,hasPieceBeenPicked:e.hasPieceBeenPicked,roomId:l,cellCords:e.cellCords,pieceObjects:e.pieceObjects,isSingleMode:e.isSingleMode}},{initBoard:()=>({type:"board_init"}),selectBagPiece:Ie,selectBoardCell:we,updateBoardData:Oe,updatePieceObject:be,stopMusic:ae})(bt),ft=n(323),It=n.n(ft);class wt extends a.Component{constructor(...e){super(...e),this.stopIntro=()=>this.props.stopIntroLoading()}componentDidMount(){setTimeout(this.stopIntro,3e3),this.props.playIntroSound()}render(){return r.a.createElement("div",{tabIndex:"0",className:"introScreen",onClick:this.stopIntro,onKeyDown:this.stopIntro},r.a.createElement("div",{className:"introScreen__logo"},r.a.createElement("img",{src:It.a,alt:""})))}}var Ot=Object(l.b)(({intro:e})=>({loading:e.loading}),{stopIntroLoading:()=>(e,t)=>{if(!t().intro.loading)return null;e(ae()),G.push("/menu"),e(le("loading",!1))},playIntroSound:()=>(e,t)=>{t().audio.soundOn&&e(re("musicUrl",$.a))}})(wt),kt=n(589);class Ct extends a.Component{constructor(...e){super(...e),this.handleClick=()=>this.props.launchMultiplayer(),this.handleInputChange=(e,t)=>this.props.updateBoardData("player".concat(e),t),this.handleExit=()=>{}}render(){const e=this.props,t=e.playerTwo,n=e.playerOne;return console.log(n.length&&t.length),r.a.createElement(H.a,{stretched:!0,className:"screen",padded:!0,centered:!0,columns:3},r.a.createElement(q.a,{verticalAlign:"middle",mobile:16,tablet:8,computer:6},r.a.createElement(Z.a,null,r.a.createElement(Te.a,{raised:!0},r.a.createElement(nt.a,{as:"h3",textAlign:"center",dividing:!0},"Who are the players?"),r.a.createElement(Ze.a,{fluid:!0,size:"massive",placeholder:"Player one"},r.a.createElement("input",{onChange:({target:{value:e}})=>this.handleInputChange("One",e),value:n})),r.a.createElement(kt.a,null),r.a.createElement(Ze.a,{fluid:!0,size:"massive",placeholder:"Player two"},r.a.createElement("input",{onChange:({target:{value:e}})=>this.handleInputChange("Two",e),value:t})))),r.a.createElement(Pe,{title:"Start",hide:!n.length||!t.length,onClick:()=>{this.handleClick("game")}}),r.a.createElement(Pe,{back:!0})))}}var Pt=Object(l.b)(({board:e})=>({playerOne:e.playerOne,playerTwo:e.playerTwo}),{launchMultiplayer:ye,updateBoardData:Oe})(Ct),St=n(324),Mt=n.n(St);class jt extends a.Component{constructor(...e){super(...e),this.handleClick=e=>G.push(e)}componentDidMount(){this.props.playMenuSound()}render(){return r.a.createElement(H.a,{stretched:!0,className:"mainScreen",padded:!0,centered:!0,columns:3},r.a.createElement(je.a,null,r.a.createElement(q.a,{verticalAlign:"middle"},r.a.createElement("div",{className:"mainScreen__logo"},r.a.createElement("img",{src:Mt.a,alt:""})),r.a.createElement(Pe,{title:"play",onClick:()=>this.handleClick("mode")}),r.a.createElement(Pe,{title:"how to play",onClick:()=>this.handleClick("tutorial")}),r.a.createElement(Pe,{title:"settings",onClick:()=>this.handleClick("settings")}),r.a.createElement(Pe,{title:"about",onClick:()=>this.handleClick("about")}))))}}var Tt=Object(l.b)(null,{playMenuSound:()=>(e,t)=>{t().audio.soundOn&&e(re("musicUrl",J.a))}})(jt),_t=n(594),Ut=n(590),Dt=n(593);class xt extends a.Component{componentDidMount(){this.props.getPeersList()}connectToPeer(e){this.props.updateNetworkData("remotePeerId",e),this.props.connectToPeer(e),this.props.updateNetworkData("inviteSent",!0)}displayPeersListItems(){var e=this.props.onlineUsers;return e.length?e.map((e,t)=>r.a.createElement(Dt.a.Item,{key:t,onClick:()=>this.connectToPeer(e)},r.a.createElement(Qe,{seed:e}),r.a.createElement(Dt.a.Content,null,r.a.createElement(Dt.a.Header,null,e)))):"No available users"}render(){const e=this.props,t=e.peer,n=e.isInvited,a=e.inviteSent;return!t||n||a?null:r.a.createElement(Te.a,null,r.a.createElement(nt.a,{as:"h3",dividing:!0,size:"large",textAlign:"left"},"Online Users",r.a.createElement(De.a,{color:"black",floated:"right",onClick:this.props.getPeersList},"Refresh"),r.a.createElement(nt.a.Subheader,null,"Select one to send an invite!")),r.a.createElement(Dt.a,{selection:!0,verticalAlign:"middle",size:"huge",className:"peersList"},this.displayPeersListItems()))}}var At=Object(l.b)(({network:e})=>({remotePeerId:e.remotePeerId,onlineUsers:e.onlineUsers,peer:e.peer,peerId:e.peerId,inviteSent:e.inviteSent,isInvited:e.isInvited}),{listenNetworkData:me,initPeer:he,getPeersList:ge,updateNetworkData:ue,connectToPeer:e=>(t,n)=>{n().network.peer.connect(e),t(ue("remotePeerId",e))}})(xt);var Nt=Object(l.b)(({network:e})=>({remotePeerId:e.remotePeerId,onlineUsers:e.onlineUsers,peer:e.peer,peerId:e.peerId,isInvited:e.isInvited,inviteSent:e.inviteSent,inviteStatus:e.inviteStatus}),{listenNetworkData:me,initPeer:he,getPeersList:ge,updateNetworkData:ue,launchMultiplayer:ye,resetNetwork:de,sendNetworkData:pe})((function(e){const t=e.peerId;return!!e.peer?null:r.a.createElement(Te.a,null,r.a.createElement(nt.a,{as:"h3",dividing:!0,textAlign:"center"},"Choose your username"),r.a.createElement(Ze.a,{action:!0,fluid:!0,size:"large",placeholder:"My username"},r.a.createElement("input",{onChange:t=>e.updateNetworkData("peerId",t.target.value),value:t}),r.a.createElement(De.a,{onClick:t=>{t.preventDefault();const n=e.peerId;/^[a-zA-Z][a-zA-Z][a-zA-Z][a-zA-Z][a-zA-Z]*[a-zA-Z]*[a-zA-Z]*[a-zA-Z]*[a-zA-Z]*[a-zA-Z]*/.test(n)?(e.initPeer(n),e.listenNetworkData({})):alert("Invalid username, all usernames must be between 4 and 10 characters long as well as only letters.")},color:"green"},"Save")))}));class Lt extends a.Component{refreshList(){this.props.getPeersList()}constructor(e){super(e),this.handleClick=()=>this.props.updateNetworkData("inviteSent",!0),this.handleConfirm=()=>{this.props.sendNetworkData("inviteStatus","accepted"),this.props.launchMultiplayer(!0)},this.handleCancel=()=>{this.props.sendNetworkData("inviteStatus","declined"),this.props.updateNetworkData("isInvited",!1)},this.refreshList=this.refreshList.bind(this)}componentDidMount(){this.props.resetNetwork()}render(){return r.a.createElement(H.a,{stretched:!0,className:"screen",padded:!0,centered:!0,columns:3},r.a.createElement(je.a,null,r.a.createElement(q.a,{verticalAlign:"middle"},r.a.createElement(Z.a,null,r.a.createElement(Nt,null),this.props.inviteSent&&"pending"===this.props.inviteStatus&&r.a.createElement(_t.a,{icon:!0},r.a.createElement(R.a,{name:"circle notched",loading:!0}),r.a.createElement(_t.a.Content,null,r.a.createElement(_t.a.Header,null,"Invite Sent"),"Your invite has been sent, please wait for a response.")),"declined"===this.props.inviteStatus&&r.a.createElement(_t.a,{icon:!0},r.a.createElement(R.a,{name:"circle notched",loading:!0}),r.a.createElement(_t.a.Content,null,r.a.createElement(_t.a.Header,null,"Invite Sent"),"Your invite has been sent, please wait for a response."))),r.a.createElement(At,null),r.a.createElement(Z.a,{className:"mainScreen__option"},r.a.createElement(Ut.a,{open:this.props.isInvited&&!this.props.inviteSent,content:this.props.remotePeerId+" would like to play with you!",cancelButton:"DECLINE",confirmButton:"ACCEPT",onConfirm:this.handleConfirm,onCancel:this.handleCancel})),r.a.createElement(Pe,{back:!0}))))}}var zt=Object(l.b)(({network:e})=>({remotePeerId:e.remotePeerId,onlineUsers:e.onlineUsers,peer:e.peer,peerId:e.peerId,isInvited:e.isInvited,inviteSent:e.inviteSent,inviteStatus:e.inviteStatus}),{listenNetworkData:me,initPeer:he,getPeersList:ge,updateNetworkData:ue,launchMultiplayer:ye,resetNetwork:de,sendNetworkData:pe})(Lt);class Bt extends a.Component{render(){return r.a.createElement(H.a,{stretched:!0,className:"screen",padded:!0,centered:!0,columns:3},r.a.createElement(je.a,null,r.a.createElement(q.a,{verticalAlign:"middle"},r.a.createElement(Z.a,null,r.a.createElement(ot,null)),r.a.createElement(Pe,{back:!0}))))}}var Ft=Bt;class Vt extends a.Component{render(){return r.a.createElement(H.a,{className:"screen",stretched:!0,padded:!0,centered:!0},r.a.createElement(q.a,{verticalAlign:"middle",mobile:16,tablet:8,computer:10},r.a.createElement(Z.a,{textAlign:"center",className:"screen__box"},r.a.createElement("h1",null,"How To Play"),r.a.createElement("p",null,"Quarto is an abstract strategy game with 16 different pieces, each with a different set of four characteristics:"),r.a.createElement("h2",null,"Height, color, shape, and surface."),r.a.createElement("p",null,"The goal of the game is to complete a row of 4 pieces with 1 characteristic in common. It doesn't matter who placed the other 3 pieces, the winner is the player that placed the last piece. Players will take turns placing pieces on the board. The catch is, the opponent picks the current player's piece."),r.a.createElement("h2",null,"Tips:"),r.a.createElement("ul",null,r.a.createElement("li",null,"Try to check the board for each different characteristic. Sometimes you may be watching for 3 different characteristics, but one might go unnoticed. "),r.a.createElement("p",null),r.a.createElement("li",null,"Once a row of 3 pieces has been placed, the next turn could win the game. Pay close attention to that last spot and what could win there."))),r.a.createElement(Pe,{back:!0})))}}var Gt=Vt,Ht=n(325),qt=n.n(Ht);class Zt extends a.Component{render(){return r.a.createElement("video",{id:"jungleVideoMainMenu",src:qt.a,type:"video/mp4",autoPlay:!0,muted:!0,loop:!0})}}var Rt=Object(l.b)(null)(Zt),Wt=n(197),Yt=n.n(Wt);class Kt extends a.Component{render(){const e=this.props,t=e.musicOn,n=e.musicUrl,a=e.soundOn,o=e.soundUrl,l=e.playingSound,i=this.props,s=i.musicVolume,c=i.soundVolume;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Yt.a,{id:"musicPlayer",loop:!0,volume:s/100,height:0,playing:!0,muted:!t,width:0,url:n}),r.a.createElement(Yt.a,{id:"soundPlayer",volume:c/100,height:0,muted:!a,playing:l,onEnded:()=>this.props.updateAudioData("playingSound",!1),width:0,url:o}))}}var Jt=Object(l.b)(({audio:e})=>({musicUrl:e.musicUrl,soundUrl:e.soundUrl,musicOn:e.musicOn,soundOn:e.soundOn,playingSound:e.playingSound,musicVolume:e.musicVolume,soundVolume:e.soundVolume}),{updateAudioData:re})(Kt);var Qt=()=>r.a.createElement(F.b,{history:G},r.a.createElement(Rt,null),r.a.createElement(Jt,null),r.a.createElement(F.a,{path:"/",component:Ot,exact:!0}),r.a.createElement(F.a,{path:"/menu",component:Tt}),r.a.createElement(F.a,{path:"/mode",component:Be}),r.a.createElement(F.a,{path:"/local",component:Pt}),r.a.createElement(F.a,{path:"/online",component:zt}),r.a.createElement(F.a,{path:"/play",component:Be}),r.a.createElement(F.a,{path:"/board",component:yt}),r.a.createElement(F.a,{path:"/about",component:Me}),r.a.createElement(F.a,{path:"/tutorial",component:Gt}),r.a.createElement(F.a,{path:"/game",component:yt}),r.a.createElement(F.a,{path:"/connectionLost",component:Ae}),r.a.createElement(F.a,{path:"/settings",component:Ft}),r.a.createElement(F.a,{path:"/difficulty",component:Le}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(575),n(576),n(577);var $t=n(327);const Xt=Object(i.createStore)(B,{},Object($t.composeWithDevTools)(Object(i.applyMiddleware)(s.a)));Object(o.render)(r.a.createElement(l.a,{store:Xt},r.a.createElement(Qt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()})}},[[338,1,2]]]);
//# sourceMappingURL=main.ba737546.chunk.js.map